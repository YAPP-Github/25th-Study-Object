## 내용정리

재사용 관점에서 상속이란 클래스 안에 정의된 인스턴스 변수와 매서드를 자동으로 새로운 클래스에 추가하는 구현 기법이다.

또다른 방법으로 클래스안에 다른 클래스의 인스턴스를 프로퍼티로 포함하여 재사용하는 방식인 합성이 있다.

## 중복코드

### DRY원칙

`Dont repeat yourself` 의 약자이다.

코드 중복을 발생시키지 않고 하나의 기능에 대한 코드는 유일한 코드로 한정하여 해당 기능에 대한 제어를 한곳을 집약시키는 원칙을 의미한다.

중복 코드는 변경을 방해한다. 

흩어져있는 코드에 대한 수정과 테스트에 드는 비용을 몇배로 증가시키기 때문이다.

### 중복코드의 단점

중복코드는 아주 짧은 시간에 중복되는 기능을 구현할 수 있게 해주지만, 언제 터질지 모르는 시한 폭탄을 안고 있는 것과 같다.

중복코드는 항상 함께 수정돼야 하기 때문에 수정할 때 하나라도 빠트린다면 버그로 이어질 것이다.

모든 중복코드를 잘 수정했다 하더라도, 모든 코드의 일관성이 무너질 위험이 항상 도사리고 있다.

중복코드를 지속적으로 사용해야하는 구조에는 문제가 있다. 방치하면 할 수록 더 많은 중복을 지속적으로 발성시키는 악성 종양이다.

### 상속을 통한 중복코드 문제 해결

우선 상속을 염두해 두지 않은 클래스를 상속하여 코드를 재사용하는 방향으로 확장하는 경우 문제가 발생한다.

상속을 염두해 두지 않았기에 부모 클래스의 변경에 자식클래스가 매우 민감하게 반응하게된다.

상위 클래스의 구현사항을 지속적으로 신경써야하는 것 자체가 문제이다.

부모 클래스와 자식 클래스 사이의 강한 결합이 코드를 수정하기 어렵게 만든다.

앞서언급한 것처럼 부모클래스의 수정이 미치는 영향을 파악할 수 없기에 확장하는 것이 매우 조심스러워진다.

### 불필요한 인터페이스 상속문제

자바의 Stack자료형의 경우 Vector클래스의 서브 클래스이다.

하지만 Vector가 제공하는 기능들중 일부는Stack에서 사용할 수 없도록 되어있다.

불필요한 인터페이스 노출로 클라이언트는 어리둥절해질 수 밖에 없는 구조이다.

<aside>

인터페이스는 설계이는 제대로 쓰기 쉽게, 엉터리로 쓰기엔 어렵게 만들어야한다.
불필요한 오퍼레이션이 인터페이스에 스며들도록 방치하면 예기치 못한 문제를 발생시킨다.

</aside>

### 매서드 오버라이딩 문제

메서드 오버라이딩은 동적 디스페치를 발생시키기에 호출할 메서드를 정적으로 파악하기 힘들게 한다.

이를 위해 오버라이딩될 수 있는 메서드에 대한 자세한 문서화가 필요하다. 이는 클라이언트 입장에서 객체의 내부 상속계층에 대한 파악일 필요함으로 캡슐화가 위반된다.

## 추상화를 통한 문제해결

문제해결의 열쇠는 추상화이다.

`중복을 제거`하기 위해 상속을 도입할 때 따르는 두가지 원칙이 있다.

1. 두 매서드가 유사해 보인다면 차이점을 매서드로 추출해라, 추출을 통해 두 메서드를 동일한 형태로 보이도록 만들 수 있다.
2. 추상적인 매서드를 보무 클래스로 보내는 것이 재사용성광 응집도 측면에서 더 뛰어나다.

### 차이를 매서드로 추출

중복 코드 안에서 차이점을 별도의 매서드로 추출하는것

<aside>

여기에는 섣불리 상속을 사용하지 말고 중복코드가 발생환 상황을 먼저 겪는 것이 중요하다.

</aside>

다른 부분을 별도의 매서드로 추출하라, 이 부분(서로 다른 부분)을 동일한 이름을 가지는 메서드로 추출해서 부모에 추상 매서드를 위치시켜라.

공통 부분의 시그니처 만을 부모클래스로 보내고 실질적인 구현은 자식클래스에 격리시켜라

### 추상화가 핵심이다.

공통 코드를 이동시킨 후에 각 클래스는 서로 다른 병경의 이유를 가진다는 것에 주목해야한다.

세 클래스는 각각 하나의 변경 이유만을 가진다. 단일 책임 원칙을 준수하기 때문에 응집도가 높다.

이 구조는 상속을 사용한 의존성 역전이라고 볼 수 있다.

추상화된 차이점만을 새로운 클래스에서 기존의 코드를 침해하지 않고 구현하기만 하면 되기 때문에 수정에는 닫혀있고 확장에는 열려있는 코드가 수립된다.

동일한 코드는 추상화하고 변경가능한 핵심로직은 추상화 함으로써 유연성을 확보할 수 있다.

## 차이에 의한 프로그래밍

상속이 강력한 이유는 익숙한 개념을 사용해서 새로운 개념을 쉽고 빠르게 추가할 수 있기 때문이다.

기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장하는 방법을 차이에 의한 프로그래밍이라고 한다.

차이에 의한 프로그래밍의 목표는 중복 코드를 제거하고 코드를 재사용하는 것이다.

상속은 코드 재사용관 관련된 대부분의 경우에 우아한 해결 방법이 아니다.

## 느낀점(개선할점)

상속을 잘못 사용할 경우 발생할 수 있는 문제에 대해 알 수 있었다.

이를 방하기 위한 글쓴이의 방식에 대해 볼 수 있었다.

차이에 의한 프로그래밍 원칙을 지켜 중복을 제거 하면서도 유연하게 확장할 수 있지만, 이는 생각보다 쉽지 않아보이며 대부분의 경우 우아한 해결법이 아니라고 생각된다.

코드 재사용을 목적으로 상속을 잘못 사용할 경우 단점

- 부모 - 자식이 강하게 결합되어 두 클래스모두 확장에 힘들고 신경쓸게 많다.